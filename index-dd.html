<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ECHO CHAMBER | Full Design Showcase</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;500;700&family=Syne:wght@400;700;800&display=swap" rel="stylesheet">
    
    <style>
        /* --- 1. VARIABLES & RESET --- */
        :root {
            --bg-deep: #050505;
            --bg-card: rgba(20, 20, 20, 0.6);
            --color-gold: #ffb700;
            --color-acid: #ccff00;
            --color-red: #ff2a2a;
            --text-main: #e0e0e0;
            --text-dim: #888;
            
            --font-display: 'Syne', sans-serif;
            --font-body: 'Space Grotesk', sans-serif;
            
            --spacer-xs: 0.5rem;
            --spacer-md: 2rem;
            --spacer-xl: 8rem; /* Augmenté pour l'espacement */
            
            --container-width: 1400px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            cursor: none;
            scroll-behavior: smooth;
        }

        body {
            background-color: var(--bg-deep);
            color: var(--text-main);
            font-family: var(--font-body);
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
        }

        /* --- Global Utils --- */
        .container {
            max-width: var(--container-width);
            margin: 0 auto;
            padding: 0 20px;
        }
        
        .section-title {
            font-size: clamp(3rem, 8vw, 6rem);
            margin-bottom: var(--spacer-md);
            border-bottom: 1px solid rgba(255,255,255,0.1);
            padding-bottom: 20px;
        }

        /* --- 2. GRAIN TEXTURE OVERLAY --- */
        .noise-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 900;
            opacity: 0.05;
            background: url('data:image/svg+xml;utf8,%3Csvg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"%3E%3Cfilter id="noiseFilter"%3E%3CfeTurbulence type="fractalNoise" baseFrequency="0.65" numOctaves="3" stitchTiles="stitch"/%3E%3C/filter%3E%3Crect width="100%25" height="100%25" filter="url(%23noiseFilter)"/%3E%3C/svg%3E');
        }

        /* --- 3. CUSTOM CURSOR (identique) --- */
        .cursor-dot, .cursor-circle {
            position: fixed;
            top: 0;
            left: 0;
            transform: translate(-50%, -50%);
            border-radius: 50%;
            z-index: 9999;
            pointer-events: none;
        }

        .cursor-dot {
            width: 8px;
            height: 8px;
            background-color: var(--color-acid);
        }

        .cursor-circle {
            width: 40px;
            height: 40px;
            border: 1px solid var(--color-acid);
            transition: width 0.2s, height 0.2s, background-color 0.2s;
        }

        body.hovering .cursor-circle {
            width: 80px;
            height: 80px;
            background-color: rgba(204, 255, 0, 0.1);
            border-color: transparent;
            backdrop-filter: blur(2px);
        }

        /* --- 4. BACKGROUND CANVAS (SMOKE) (identique) --- */
        #smokeCanvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.6;
        }

        /* --- 5. TYPOGRAPHY & BUTTONS (Identique avec ajout pour les formulaires) --- */
        h1, h2, h3 {
            font-family: var(--font-display);
            font-weight: 800;
            line-height: 0.9;
            text-transform: uppercase;
        }

        .btn {
            display: inline-block;
            padding: 15px 30px;
            border: 1px solid var(--color-acid);
            color: var(--color-acid);
            text-decoration: none;
            font-weight: 700;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
            transition: color 0.3s, transform 0.1s;
            background: none; /* Pour les boutons de formulaire */
        }
        
        .btn:active {
            transform: scale(0.98);
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: var(--color-acid);
            transition: transform 0.4s cubic-bezier(0.77, 0, 0.175, 1);
            z-index: -1;
        }

        .btn:hover {
            color: var(--bg-deep);
        }

        .btn:hover::before {
            transform: translateX(100%);
        }

        /* --- 6. NAVIGATION & HERO (Identique) --- */
        nav {
            position: fixed;
            top: 0;
            width: 100%;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 100;
            mix-blend-mode: difference;
        }
        .logo {
            font-family: var(--font-display);
            font-size: 1.5rem;
            color: var(--color-acid);
        }
        .nav-links {
            display: flex;
            gap: 40px;
        }
        .nav-links a {
            color: #fff;
            text-decoration: none;
            font-size: 0.9rem;
            text-transform: uppercase;
            position: relative;
        }
        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--color-acid);
            transition: width 0.3s;
        }
        .nav-links a:hover::after {
            width: 100%;
        }
        .menu-toggle { display: none; color: #fff; font-size: 1.5rem; }

        .hero {
            height: 100vh;
            display: flex;
            align-items: center;
            position: relative;
        }
        .hero-content { z-index: 2; }
        .hero h1 {
            font-size: clamp(4rem, 15vw, 12rem);
            color: transparent;
            -webkit-text-stroke: 2px rgba(255,255,255,0.8);
            position: relative;
        }
        .hero h1 span {
            display: block;
            color: var(--color-acid);
            -webkit-text-stroke: 0;
            transform: translateX(10vw);
            opacity: 0;
            animation: slideIn 1.5s cubic-bezier(0.2, 1, 0.3, 1) forwards;
            animation-delay: 0.5s;
        }
        .hero-sub {
            font-size: clamp(1rem, 2vw, 1.5rem);
            max-width: 500px;
            margin-top: 2rem;
            color: var(--text-dim);
            margin-left: auto;
            text-align: right;
        }

        /* --- 7. LINEUP (Grid Asymétrique) --- */
        .lineup { padding: var(--spacer-xl) 0; }
        .grid-layout {
            display: grid;
            grid-template-columns: repeat(12, 1fr);
            gap: 20px;
        }
        .card {
            background: var(--bg-card);
            border: 1px solid rgba(255,255,255,0.05);
            padding: 2rem;
            backdrop-filter: blur(10px);
            transition: transform 0.4s, border-color 0.4s;
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            min-height: 350px;
        }
        .card:hover {
            transform: translateY(-10px) scale(1.02);
            border-color: var(--color-acid);
            z-index: 10;
        }
        .card h3 { font-size: 2.5rem; margin-bottom: 0.5rem; }
        .card p { font-family: var(--font-body); color: var(--text-dim); }
        .card .genre {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 0.8rem;
            border: 1px solid var(--text-dim);
            padding: 5px 10px;
            border-radius: 20px;
        }
        /* Asymmetric Placement */
        .card:nth-child(1) { grid-column: 1 / 8; }
        .card:nth-child(2) { grid-column: 8 / 13; background: #111; }
        .card:nth-child(3) { grid-column: 1 / 6; min-height: 450px; border-color: var(--color-red); }
        .card:nth-child(4) { grid-column: 6 / 13; min-height: 450px; }

        /* --- 8. SECTION NOUVELLE (Parallaxe & Image Asymétrique) --- */
        .parallaxe-section {
            padding: var(--spacer-xl) 0;
            display: flex;
            gap: 40px;
            align-items: center;
        }
        .parallaxe-content {
            flex: 1;
            padding-right: 50px;
            z-index: 2;
        }
        .parallaxe-image-wrapper {
            flex: 1;
            position: relative;
            height: 500px;
            /* Masquer sur mobile */
            display: none;
        }
        .parallaxe-image {
            position: absolute;
            top: 50px; /* Décalage initial */
            left: 0;
            width: 100%;
            height: 400px;
            background: linear-gradient(135deg, var(--color-acid), var(--color-gold));
            opacity: 0.9;
            box-shadow: 0 0 50px rgba(204, 255, 0, 0.2);
            transition: transform 0.1s ease-out; /* Pour l'effet parallaxe JS */
        }
        .parallaxe-image::after {
            content: "SUB BASS";
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(-10deg);
            font-family: var(--font-display);
            font-size: 3rem;
            color: var(--bg-deep);
            opacity: 0.8;
        }
        
        /* Afficher la section parallaxe sur PC */
        @media (min-width: 1024px) {
            .parallaxe-image-wrapper {
                display: block;
            }
        }

        /* --- 9. SECTION CARROUSEL (Slider) --- */
        .slider-section {
            padding: var(--spacer-xl) 0;
            overflow: hidden;
        }
        .slider-track {
            display: flex;
            transition: transform 0.5s ease-in-out;
        }
        .slider-item {
            min-width: 300px;
            margin-right: 20px;
            padding: 30px;
            background: var(--bg-card);
            border: 1px solid var(--color-gold);
            opacity: 0.5;
            transition: opacity 0.4s;
            position: relative;
        }
        .slider-item.active {
            opacity: 1;
            transform: scale(1.05);
        }
        .slider-nav {
            text-align: center;
            margin-top: 30px;
        }
        .dot {
            height: 10px;
            width: 10px;
            background-color: var(--text-dim);
            border-radius: 50%;
            display: inline-block;
            margin: 0 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .dot.active {
            background-color: var(--color-acid);
            transform: scale(1.2);
        }

        /* --- 10. FORMULAIRE (Newsletter) --- */
        .form-section {
            padding: var(--spacer-xl) 0;
        }
        .form-group {
            margin-bottom: 20px;
            position: relative;
        }
        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: var(--color-acid);
            text-transform: uppercase;
            font-size: 0.8rem;
        }
        .form-group input {
            width: 100%;
            padding: 15px 10px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--text-dim);
            color: var(--text-main);
            font-size: 1rem;
            transition: border-color 0.3s, box-shadow 0.3s;
        }
        .form-group input:focus {
            outline: none;
            border-color: var(--color-acid);
            box-shadow: 0 0 10px rgba(204, 255, 0, 0.3);
        }
        .error-message {
            position: absolute;
            bottom: -20px;
            left: 0;
            color: var(--color-red);
            font-size: 0.8rem;
            opacity: 0;
            transition: opacity 0.3s;
        }
        .form-group.error input {
            border-color: var(--color-red);
        }
        .form-group.error .error-message {
            opacity: 1;
        }

        /* --- 11. FAQ / ACCORDION --- */
        .faq-section {
            padding: var(--spacer-xl) 0;
            max-width: 800px;
            margin: 0 auto;
        }
        .accordion-item {
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 10px;
        }
        .accordion-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            cursor: pointer;
            font-size: 1.2rem;
            font-family: var(--font-display);
        }
        .accordion-header span {
            color: var(--color-acid);
            font-size: 1.5rem;
            transform: rotate(0deg);
            transition: transform 0.3s;
        }
        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-out;
            padding: 0 0 0px 0;
        }
        .accordion-content.active {
            padding: 0 0 20px 0;
        }
        .accordion-header.active span {
            transform: rotate(45deg);
        }

        /* --- 12. MODAL (Popup) --- */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 999;
            display: none;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 0.3s;
        }
        .modal.open {
            display: flex;
            opacity: 1;
        }
        .modal-content {
            background: var(--bg-deep);
            border: 2px solid var(--color-red);
            padding: 40px;
            max-width: 400px;
            text-align: center;
            transform: translateY(-50px);
            transition: transform 0.5s ease;
        }
        .modal.open .modal-content {
            transform: translateY(0);
        }
        .modal-content h3 {
            color: var(--color-red);
            margin-bottom: 15px;
        }

        /* --- 13. RESPONSIVE & ANIMATIONS (Identique) --- */
        @media (max-width: 1024px) {
            .card:nth-child(n) { grid-column: span 6; }
            .parallaxe-section { flex-direction: column; }
            .parallaxe-content { padding-right: 0; }
        }

        @media (max-width: 768px) {
            .nav-links {
                position: fixed;
                top: 0;
                right: 0;
                height: 100vh;
                width: 70%;
                background: #111;
                flex-direction: column;
                justify-content: center;
                align-items: center;
                transform: translateX(100%);
                transition: transform 0.4s ease;
            }
            .nav-links.active { transform: translateX(0); }
            .menu-toggle { display: block; z-index: 101; }
            .card:nth-child(n) { grid-column: span 12; min-height: 300px; }
            .hero h1 { font-size: 18vw; line-height: 1; }
            .hero h1 span { transform: translateX(0); }
            .parallaxe-image-wrapper { display: none !important; } /* Cacher l'image parallaxe sur petit écran */
        }

        @keyframes slideIn { to { opacity: 1; transform: translateX(0); } }
        /* Marquee, Footer (Omitted for brevity in the analysis, but included below) */

        .marquee {
            padding: var(--spacer-xl) 0;
            overflow: hidden;
            white-space: nowrap;
            background: var(--color-acid);
            color: var(--bg-deep);
            transform: rotate(-2deg) scale(1.1);
        }

        .marquee-content {
            display: inline-block;
            animation: scroll 20s linear infinite;
        }

        .marquee span {
            font-family: var(--font-display);
            font-size: 4rem;
            font-weight: 800;
            margin-right: 4rem;
        }

        @keyframes scroll {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }

        footer {
            padding: 50px 20px;
            text-align: center;
            border-top: 1px solid #222;
            margin-top: 50px;
        }

        .sound-wave {
            display: flex;
            justify-content: center;
            align-items: flex-end;
            height: 50px;
            gap: 5px;
            margin-bottom: 20px;
        }

        .bar {
            width: 10px;
            background: var(--color-gold);
            animation: wave 1s infinite ease-in-out;
        }
        .bar:nth-child(2) { animation-delay: 0.1s; height: 60%; }
        .bar:nth-child(3) { animation-delay: 0.2s; height: 80%; }
        .bar:nth-child(4) { animation-delay: 0.3s; height: 40%; }
        .bar:nth-child(5) { animation-delay: 0.4s; height: 90%; }

        @keyframes wave {
            0%, 100% { height: 20%; }
            50% { height: 100%; }
        }
    </style>
</head>
<body>

    <div class="noise-overlay"></div>

    <div class="cursor-dot"></div>
    <div class="cursor-circle"></div>

    <canvas id="smokeCanvas"></canvas>

    <nav>
        <a href="#" class="logo hover-trigger">ECHO CHAMBER.</a>
        <div class="menu-toggle">☰</div>
        <div class="nav-links">
            <a href="#lineup" class="hover-trigger">Line Up</a>
            <a href="#parallax" class="hover-trigger">Experience</a>
            <a href="#carousel" class="hover-trigger">Media</a>
            <a href="#faq" class="hover-trigger">FAQ</a>
            <a href="#newsletter" class="hover-trigger">Contact</a>
        </div>
    </nav>

    <div class="modal" id="ageModal">
        <div class="modal-content">
            <h3>AVERTISSEMENT SONORE</h3>
            <p>Cet événement contient des fréquences de sub-basses très basses. Protégez vos oreilles !</p>
            <br>
            <button class="btn hover-trigger" onclick="document.getElementById('ageModal').classList.remove('open')">J'AI COMPRIS</button>
        </div>
    </div>

    <section class="hero">
        <div class="container hero-content">
            <h1>DIGITAL<br><span>ROOTS</span></h1>
            <div class="hero-sub">
                <p>BASS CULTURE REIMAGINED.<br>14.07.2025 // PARIS UNDERGROUND</p>
                <br>
                <a href="#newsletter" class="btn hover-trigger">RESTER INFORMÉ</a>
            </div>
        </div>
    </section>

    <div class="marquee">
        <div class="marquee-content">
            <span>HEAVY BASS</span><span>SOUND SYSTEM</span><span>DUBPLATES</span><span>HYPNOTIC ECHOES</span><span>HEAVY BASS</span><span>SOUND SYSTEM</span><span>DUBPLATES</span><span>HYPNOTIC ECHOES</span>
        </div>
    </div>

    <section class="lineup container" id="lineup">
        <h2 class="section-title">SELECTION</h2>
        <div class="grid-layout">
            <div class="card hover-trigger">
                <span class="genre">DUB TECHNO</span>
                <div><h3>KING TUBBY<br>VIRTUAL</h3><p>Une reconstruction holographique du maître du Dub.</p></div>
            </div>
            <div class="card hover-trigger">
                <span class="genre">STEPPER</span>
                <div><h3>ZION<br>TRAIN</h3><p>Live mixing session avec section cuivres augmentée.</p></div>
            </div>
            <div class="card hover-trigger">
                <span class="genre">ROOTS REVIVAL</span>
                <div><h3>JAH<br>SHAKA</h3><p>5 Hour heavy rotation. Spiritual vibes only.</p></div>
            </div>
            <div class="card hover-trigger">
                <span class="genre">AMBIENT DUB</span>
                <div><h3>RHYTHM<br>& SOUND</h3><p>Deep immersion, basic channel showcase.</p></div>
            </div>
        </div>
    </section>

    <section class="container parallaxe-section" id="parallax">
        <div class="parallaxe-content">
            <h2 class="section-title">VIBRATIONS</h2>
            <p style="font-size: 1.2rem; margin-bottom: 20px;">Laissez-vous submerger par l'expérience sonore. Nos systèmes de basses sont calibrés pour offrir une expérience physique, pas seulement auditive. Sentez l'onde de choc des basses fréquences.</p>
            <button class="btn hover-trigger" onclick="document.getElementById('ageModal').classList.add('open')">Avertissement</button>
        </div>
        <div class="parallaxe-image-wrapper">
            <div class="parallaxe-image" id="parallax-img"></div>
        </div>
    </section>

    <section class="slider-section" id="carousel">
        <div class="container">
            <h2 class="section-title">ÉCHOS SONORES</h2>
            <div class="slider-track" id="sliderTrack">
                <div class="slider-item hover-trigger">
                    <h3>"Profond et sombre"</h3>
                    <p>La soirée de l'année. Jamais entendu de basses aussi claires et puissantes.</p>
                    <p style="color: var(--color-acid); margin-top: 10px;">- DJ Mag Review</p>
                </div>
                <div class="slider-item hover-trigger">
                    <h3>"Une transe spirituelle"</h3>
                    <p>Le sound system nous a transportés. Une vraie session roots, authentique et chaleureuse.</p>
                    <p style="color: var(--color-acid); margin-top: 10px;">- P. Dubois, Spectateur</p>
                </div>
                <div class="slider-item hover-trigger">
                    <h3>"Le futur du dub"</h3>
                    <p>Mélange parfait de digital et d'analogique. L'acoustique de la salle était parfaite.</p>
                    <p style="color: var(--color-acid); margin-top: 10px;">- Mix Up Monthly</p>
                </div>
                <div class="slider-item hover-trigger">
                    <h3>"Le son est massif"</h3>
                    <p>Rien à ajouter, c'était tout simplement massif.</p>
                    <p style="color: var(--color-acid); margin-top: 10px;">- R. Kévin</p>
                </div>
            </div>
            <div class="slider-nav" id="sliderNav">
                </div>
        </div>
    </section>

    <section class="faq-section" id="faq">
        <h2 class="section-title" style="text-align: center;">FAQ</h2>
        <div class="accordion-item">
            <div class="accordion-header hover-trigger">
                Où se déroule l'événement ?
                <span>+</span>
            </div>
            <div class="accordion-content">
                <p style="color: var(--text-dim);">Le lieu exact (un entrepôt désaffecté) sera révélé par SMS 48h avant l'événement pour conserver une ambiance underground exclusive.</p>
            </div>
        </div>
        <div class="accordion-item">
            <div class="accordion-header hover-trigger">
                Puis-je acheter des tickets sur place ?
                <span>+</span>
            </div>
            <div class="accordion-content">
                <p style="color: var(--text-dim);">Non. Les billets sont uniquement disponibles en prévente en ligne. Le nombre de places est très limité pour garantir une qualité sonore optimale.</p>
            </div>
        </div>
        <div class="accordion-item">
            <div class="accordion-header hover-trigger">
                Y a-t-il un vestiaire ?
                <span>+</span>
            </div>
            <div class="accordion-content">
                <p style="color: var(--text-dim);">Oui, un vestiaire est disponible pour une somme modique (3€). Pensez à apporter de l'argent liquide.</p>
            </div>
        </div>
    </section>

    <section class="container form-section" id="newsletter">
        <h2 class="section-title">REJOINDRE LE RUMBLE</h2>
        <form class="newsletter-form" onsubmit="handleFormSubmit(event)">
            <div class="form-group" id="email-group">
                <label for="email">Votre Email (pour les futures sessions)</label>
                <input type="email" id="email" name="email" placeholder="mail@example.com" required>
                <span class="error-message">Veuillez entrer une adresse email valide.</span>
            </div>
            <button type="submit" class="btn hover-trigger" style="width: 100%;">INSCRIPTION</button>
        </form>
    </section>

    <footer>
        <div class="sound-wave">
            <div class="bar"></div>
            <div class="bar"></div>
            <div class="bar"></div>
            <div class="bar"></div>
            <div class="bar"></div>
        </div>
        <p>&copy; 2025 ECHO CHAMBER SOUND SYSTEM.</p>
        <p style="color: var(--text-dim); font-size: 0.8rem; margin-top:10px;">FEEL THE BASS IN YOUR CHEST</p>
    </footer>

    <script>
        // --- 1. CUSTOM CURSOR & HOVER LOGIC (Identique) ---
        const cursorDot = document.querySelector('.cursor-dot');
        const cursorCircle = document.querySelector('.cursor-circle');
        const hoverTriggers = document.querySelectorAll('.hover-trigger');
        let mouseX = 0, mouseY = 0;
        let cursorX = 0, cursorY = 0;

        document.addEventListener('mousemove', (e) => {
            mouseX = e.clientX;
            mouseY = e.clientY;
            cursorDot.style.left = mouseX + 'px';
            cursorDot.style.top = mouseY + 'px';
        });

        function animateCursor() {
            let distX = mouseX - cursorX;
            let distY = mouseY - cursorY;
            cursorX += distX * 0.15;
            cursorY += distY * 0.15;
            cursorCircle.style.left = cursorX + 'px';
            cursorCircle.style.top = cursorY + 'px';
            requestAnimationFrame(animateCursor);
        }
        animateCursor();

        hoverTriggers.forEach(trigger => {
            trigger.addEventListener('mouseenter', () => document.body.classList.add('hovering'));
            trigger.addEventListener('mouseleave', () => document.body.classList.remove('hovering'));
        });

        // --- 2. CANVAS SMOKE EFFECT (Identique) ---
        const canvas = document.getElementById('smokeCanvas');
        const ctx = canvas.getContext('2d');
        let width, height;
        let particles = [];

        function resize() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resize);
        resize();

        class Particle {
            constructor() {
                this.x = Math.random() * width;
                this.y = height + Math.random() * 100;
                this.vx = Math.random() * 1 - 0.5;
                this.vy = Math.random() * -1.5 - 0.5;
                this.size = Math.random() * 30 + 10;
                this.alpha = Math.random() * 0.2;
                this.color = Math.random() > 0.5 ? '100, 100, 100' : '50, 205, 50';
            }
            update() {
                this.x += this.vx;
                this.y += this.vy;
                this.alpha -= 0.0005;
                if (this.y < -50 || this.alpha <= 0) {
                    this.x = Math.random() * width;
                    this.y = height + 50;
                    this.alpha = Math.random() * 0.15;
                }
            }
            draw() {
                ctx.beginPath();
                let gradient = ctx.createRadialGradient(this.x, this.y, 0, this.x, this.y, this.size);
                gradient.addColorStop(0, `rgba(${this.color}, ${this.alpha})`);
                gradient.addColorStop(1, `rgba(${this.color}, 0)`);
                ctx.fillStyle = gradient;
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
            }
        }
        for (let i = 0; i < 50; i++) { particles.push(new Particle()); }
        function animateSmoke() {
            ctx.clearRect(0, 0, width, height);
            particles.forEach(p => { p.update(); p.draw(); });
            requestAnimationFrame(animateSmoke);
        }
        animateSmoke();

        // --- 3. MOBILE MENU (Identique) ---
        const menuToggle = document.querySelector('.menu-toggle');
        const navLinks = document.querySelector('.nav-links');
        menuToggle.addEventListener('click', () => {
            navLinks.classList.toggle('active');
            menuToggle.textContent = navLinks.classList.contains('active') ? '✕' : '☰';
        });
        document.querySelectorAll('.nav-links a').forEach(link => {
            link.addEventListener('click', () => {
                navLinks.classList.remove('active');
                menuToggle.textContent = '☰';
            });
        });

        // --- 4. PARALLAX SCROLL EFFECT ---
        const parallaxImg = document.getElementById('parallax-img');
        if(parallaxImg) {
            window.addEventListener('scroll', () => {
                const scrollY = window.scrollY;
                // Move the element relative to the scroll position (subtle effect)
                parallaxImg.style.transform = `translateY(${scrollY * 0.05}px) rotate(${scrollY * 0.005}deg)`;
            });
        }


        // --- 5. CAROUSEL/SLIDER LOGIC ---
        const sliderTrack = document.getElementById('sliderTrack');
        const sliderNav = document.getElementById('sliderNav');
        const sliderItems = document.querySelectorAll('.slider-item');
        let currentIndex = 0;

        function updateSlider() {
            // Calculate slide width, ensuring we only transform the necessary amount
            const itemWidth = sliderItems[0].offsetWidth + 20; // width + margin-right
            sliderTrack.style.transform = `translateX(-${currentIndex * itemWidth}px)`;

            // Update dots
            const dots = sliderNav.querySelectorAll('.dot');
            dots.forEach((dot, index) => {
                dot.classList.remove('active');
                sliderItems[index].classList.remove('active');
                if (index === currentIndex) {
                    dot.classList.add('active');
                    sliderItems[index].classList.add('active');
                }
            });
        }

        // Generate dots
        sliderItems.forEach((_, index) => {
            const dot = document.createElement('span');
            dot.classList.add('dot', 'hover-trigger');
            dot.addEventListener('click', () => {
                currentIndex = index;
                updateSlider();
            });
            sliderNav.appendChild(dot);
        });

        // Initial call
        updateSlider();
        
        // Auto-slide every 5 seconds
        setInterval(() => {
            currentIndex = (currentIndex + 1) % sliderItems.length;
            updateSlider();
        }, 5000);
        
        // --- 6. ACCORDION (FAQ) LOGIC ---
        const accordionHeaders = document.querySelectorAll('.accordion-header');

        accordionHeaders.forEach(header => {
            header.addEventListener('click', () => {
                const content = header.nextElementSibling;
                const isActive = header.classList.contains('active');

                // Close all others
                accordionHeaders.forEach(h => {
                    h.classList.remove('active');
                    h.nextElementSibling.classList.remove('active');
                    h.nextElementSibling.style.maxHeight = null;
                });

                // Open current if it was closed
                if (!isActive) {
                    header.classList.add('active');
                    content.classList.add('active');
                    content.style.maxHeight = content.scrollHeight + "px";
                }
            });
        });

        // --- 7. FORM VALIDATION LOGIC ---
        function handleFormSubmit(event) {
            event.preventDefault();
            const emailInput = document.getElementById('email');
            const emailGroup = document.getElementById('email-group');

            // Simple Email Regex check
            const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/; 

            if (!emailPattern.test(emailInput.value)) {
                emailGroup.classList.add('error');
            } else {
                emailGroup.classList.remove('error');
                
                // Simulate success
                alert("Inscription réussie pour: " + emailInput.value + " ! Restez à l'écoute pour le prochain rumble.");
                emailInput.value = ''; // Clear input on success
            }
        }

        // --- 8. MODAL SHOW ON LOAD ---
        window.addEventListener('load', () => {
            // Show the modal after a short delay to ensure assets are loaded
            setTimeout(() => {
                document.getElementById('ageModal').classList.add('open');
            }, 1000); 
        });

    </script>
</body>
</html>
